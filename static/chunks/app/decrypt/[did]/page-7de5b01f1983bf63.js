(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[895],{2853:function(e,n,r){Promise.resolve().then(r.bind(r,3100))},6017:function(e,n,r){"use strict";r.r(n),r.d(n,{AppDrawer:function(){return G},theme:function(){return D}});var t=r(3827),i=r(9409),s=r(6780),a=r(4090),o=r(1680),d=r(8670),c=r(9885),l=r(4846),x=r(8836),h=r(4272),p=r(2858),u=r(278),j=r(6676),g=r(6436),Z=r(5340),m=r(8087),f=r(8416),w=r(9565),y=r(8740),k=r(6849),v=r(7389),P=r(781),C=r(6730),b=r(8307),S=r(8433),A=r(6285),H=r(7907);let D=(0,c.Z)({cssVarPrefix:"md-demo",colorSchemes:{light:{palette:{primary:{main:o.Z[400]},secondary:{main:d.Z[600]}}},dark:{palette:{primary:{main:o.Z[300]},secondary:{main:d.Z[600]}}}}}),E=()=>{let{mode:e,setMode:n}=(0,l.tv)(),[r,i]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{i(!0)},[]),r)?(0,t.jsx)(A.Z,{variant:"outlined",onClick:()=>{"light"===e?n("dark"):n("light")},children:"light"===e?"Dark Mode":"Light Mode"}):null},K=(0,x.ZP)("main",{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:n,open:r}=e;return{flexGrow:1,padding:n.spacing(3),transition:n.transitions.create("margin",{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),marginRight:-240,...r&&{transition:n.transitions.create("margin",{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.enteringScreen}),marginRight:0},position:"relative"}}),M=(0,x.ZP)(u.Z,{shouldForwardProp:e=>"open"!==e})(e=>{let{theme:n,open:r}=e;return{transition:n.transitions.create(["margin","width"],{easing:n.transitions.easing.sharp,duration:n.transitions.duration.leavingScreen}),...r&&{width:"calc(100% - ".concat(240,"px)"),transition:n.transitions.create(["margin","width"],{easing:n.transitions.easing.easeOut,duration:n.transitions.duration.enteringScreen}),marginRight:240}}}),R=(0,x.ZP)("div")(e=>{let{theme:n}=e;return{display:"flex",alignItems:"center",padding:n.spacing(0,1),...n.mixins.toolbar,justifyContent:"flex-start"}}),G=e=>{let{children:n}=e,r=(0,H.useRouter)(),[o,d]=a.useState(!1);return(0,t.jsx)(l.CM,{theme:D,children:(0,t.jsxs)(h.Z,{sx:{display:"flex"},children:[(0,t.jsx)(g.ZP,{}),(0,t.jsx)(M,{position:"fixed",open:o,children:(0,t.jsxs)(j.Z,{children:[(0,t.jsx)(m.Z,{variant:"h6",noWrap:!0,sx:{flexGrow:1},component:"div",children:"HPKE"}),(0,t.jsx)(w.Z,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:()=>{d(!0)},sx:{...o&&{display:"none"}},children:(0,t.jsx)(y.Z,{})})]})}),(0,t.jsxs)(K,{open:o,children:[(0,t.jsx)(R,{}),n]}),(0,t.jsxs)(p.ZP,{sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240}},variant:"persistent",anchor:"right",open:o,children:[(0,t.jsx)(R,{children:(0,t.jsx)(w.Z,{onClick:()=>{d(!1)},children:"rtl"===D.direction?(0,t.jsx)(k.Z,{}):(0,t.jsx)(v.Z,{})})}),(0,t.jsx)(f.Z,{}),(0,t.jsxs)(Z.Z,{children:[(0,t.jsx)(P.ZP,{disablePadding:!0,children:(0,t.jsxs)(C.Z,{onClick:()=>{r.push("/")},children:[(0,t.jsx)(b.Z,{children:(0,t.jsx)(i.Z,{})}),(0,t.jsx)(S.Z,{primary:"Home"})]})}),(0,t.jsx)(P.ZP,{disablePadding:!0,children:(0,t.jsxs)(C.Z,{onClick:()=>{r.push("/about")},children:[(0,t.jsx)(b.Z,{children:(0,t.jsx)(s.Z,{})}),(0,t.jsx)(S.Z,{primary:"About"})]})})]}),(0,t.jsx)(f.Z,{sx:{flexGrow:1}}),(0,t.jsx)(h.Z,{sx:{p:2},children:(0,t.jsx)(E,{})})]})]})})}},3100:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return k}});var t=r(3827),i=r(6017),s=r(4272),a=r(859),o=r(4090),d=r(8087),c=r(7907),l=r(4784),x=r(6236),h=r(6582),p=r(7453),u=r(1680),j=r(8670);let g=e=>{let{onFilesAccepted:n,sx:r,dragText:i,dropText:s}=e,c=(0,o.useCallback)(e=>{n(e)},[n]),{getRootProps:l,getInputProps:x,isDragActive:h}=(0,p.uI)({onDrop:c});return(0,t.jsxs)(a.Z,{...l(),align:"center",style:{border:h?"1px "+j.Z.A200+" dashed":"1px "+u.Z.A200+" dashed",boxShadow:"none",textAlign:"center",cursor:"pointer"},sx:{height:96,display:"flex",flexDirection:"column",justifyContent:"center",...r},children:[(0,t.jsx)("input",{...x()}),h?(0,t.jsx)(d.Z,{color:j.Z.A200,children:s||"Drop file here."}):(0,t.jsx)(d.Z,{color:u.Z.A200,children:i||"Drag file here."})]})};var Z=r(1066),m=r(5884),f=r(5492),w=r(6323),y=r(7982);function k(){let e=(0,c.useParams)(),[n,r]=o.useState(),p=async n=>{let[t]=n,i=JSON.parse(await t.text()),s=decodeURIComponent(e.did).replace("did:jwe:",""),a=await h.o.decrypt(s,i);r(new TextDecoder().decode(a))};return(0,t.jsxs)(i.AppDrawer,{children:[(0,t.jsx)(s.Z,{sx:{display:"flex",flexDirection:"row",mb:2},children:(0,t.jsx)(s.Z,{sx:{flexGrow:1},children:(0,t.jsx)(d.Z,{variant:"h6",component:"div",children:"Message"})})}),(0,t.jsx)(l.Z,{deleteIcon:(0,t.jsx)(x.Z,{}),onDelete:()=>{},label:decodeURIComponent(e.did).substring(0,32)+"..."}),n?(0,t.jsx)(s.Z,{sx:{mt:2},children:(0,t.jsxs)(a.Z,{sx:{p:2},children:[(0,t.jsx)(m.Z,{sx:{mb:2},children:(0,t.jsx)(Z.Z,{})}),(0,t.jsx)(s.Z,{sx:{mt:2},children:(0,t.jsx)(f.ZP,{theme:y.Br,value:n,onChange:e=>{r(e)},extensions:[(0,w.JH)(),f.tk.lineWrapping]})})]})}):(0,t.jsx)(s.Z,{sx:{mt:2},children:(0,t.jsx)(g,{dragText:"Drag exported private key here",dropText:"Drop to decrypt.",onFilesAccepted:p})})]})}},6582:function(e,n,r){"use strict";r.d(n,{o:function(){return t}});var t={};r.r(t),r.d(t,{decrypt:function(){return x},encrypt:function(){return l}});var i=r(7056),s=r(9860);let a={"HPKE-Base-P256-SHA256-AES128GCM":new s.vN({kem:s.ML.DhkemP256HkdfSha256,kdf:s.AC.HkdfSha256,aead:s.R9.Aes128Gcm}),"HPKE-Base-P384-SHA256-AES128GCM":new s.vN({kem:s.ML.DhkemP384HkdfSha384,kdf:s.AC.HkdfSha256,aead:s.R9.Aes128Gcm})},o=e=>Object.keys(a).includes("".concat(e.alg)),d=async e=>await window.crypto.subtle.importKey("jwk",e,{name:"ECDH",namedCurve:e.crv},!0,[]),c=async e=>await crypto.subtle.importKey("jwk",e,{name:"ECDH",namedCurve:e.crv},!0,["deriveBits","deriveKey"]),l=async(e,n)=>{if(!o(n))throw Error("Public key algorithm is not supported");let r=a[n.alg],t=await r.createSenderContext({recipientPublicKey:await d(n)}),s=i.tH.encode(new Uint8Array(t.enc)),c=i.tH.encode(JSON.stringify({alg:n.alg,epk:{kty:"EK",ek:s}})),l=new TextEncoder().encode(c),x=i.tH.encode(new Uint8Array(await t.seal(e,l)));return"".concat(c,"...").concat(x,".")},x=async(e,n)=>{if(!o(n))throw Error("Public key algorithm is not supported");let r=a[n.alg],[t,s,d,l,x]=e.split("."),h=JSON.parse(new TextDecoder().decode(i.tH.decode(t))),p=await r.createRecipientContext({recipientKey:await c(n),enc:i.tH.decode(h.epk.ek)}),u=new TextEncoder().encode(t),j=await p.open(i.tH.decode(l),u);return new Uint8Array(j)}}},function(e){e.O(0,[401,337,399,197,563,971,69,744],function(){return e(e.s=2853)}),_N_E=e.O()}]);