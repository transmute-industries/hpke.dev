(()=>{var e={};e.id=957,e.ids=[957],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},6113:e=>{"use strict";e.exports=require("crypto")},2254:e=>{"use strict";e.exports=require("node:buffer")},6005:e=>{"use strict";e.exports=require("node:crypto")},5673:e=>{"use strict";e.exports=require("node:events")},8849:e=>{"use strict";e.exports=require("node:http")},2286:e=>{"use strict";e.exports=require("node:https")},7261:e=>{"use strict";e.exports=require("node:util")},1017:e=>{"use strict";e.exports=require("path")},7310:e=>{"use strict";e.exports=require("url")},3271:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>l,routeModule:()=>x,tree:()=>c});var n=r(482),i=r(9108),s=r(2563),a=r.n(s),o=r(8300),d={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>o[e]);r.d(t,d);let c=["",{children:["encrypt",{children:["[did]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1362)),"/home/runner/work/hpke.dev/hpke.dev/app/encrypt/[did]/page.tsx"]}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,2917)),"/home/runner/work/hpke.dev/hpke.dev/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,9361,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,7481))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/home/runner/work/hpke.dev/hpke.dev/app/encrypt/[did]/page.tsx"],p="/encrypt/[did]/page",u={require:r,loadChunk:()=>Promise.resolve()},x=new n.AppPageRouteModule({definition:{kind:i.x.APP_PAGE,page:"/encrypt/[did]/page",pathname:"/encrypt/[did]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},6163:(e,t,r)=>{Promise.resolve().then(r.bind(r,1269))},3525:()=>{},1995:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,6840,23)),Promise.resolve().then(r.t.bind(r,8771,23)),Promise.resolve().then(r.t.bind(r,3225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,3982,23))},6314:(e,t,r)=>{"use strict";r.r(t),r.d(t,{AppDrawer:()=>D,theme:()=>q});var n=r(5344),i=r(5191),s=r(5288),a=r(3729),o=r(311),d=r(9800),c=r(2126),l=r(4714),p=r(9448),u=r(6739),x=r(4212),h=r(6706),m=r(4183),g=r(5353),y=r(946),v=r(4047),j=r(4904),w=r(3941),f=r(4665),P=r(330),k=r(3450),Z=r(4878),b=r(4624),C=r(4072),S=r(9478),H=r(5183),E=r(8428);let q=(0,c.Z)({cssVarPrefix:"md-demo",colorSchemes:{light:{palette:{primary:{main:o.Z[400]},secondary:{main:d.Z[600]}}},dark:{palette:{primary:{main:o.Z[300]},secondary:{main:d.Z[600]}}}}}),A=()=>{let{mode:e,setMode:t}=(0,l.tv)(),[r,i]=(0,a.useState)(!1);return((0,a.useEffect)(()=>{i(!0)},[]),r)?n.jsx(H.Z,{variant:"outlined",onClick:()=>{"light"===e?t("dark"):t("light")},children:"light"===e?"Dark Mode":"Light Mode"}):null},_=(0,p.ZP)("main",{shouldForwardProp:e=>"open"!==e})(({theme:e,open:t})=>({flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginRight:-240,...t&&{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:0},position:"relative"})),G=(0,p.ZP)(h.Z,{shouldForwardProp:e=>"open"!==e})(({theme:e,open:t})=>({transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...t&&{width:"calc(100% - 240px)",transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginRight:240}})),M=(0,p.ZP)("div")(({theme:e})=>({display:"flex",alignItems:"center",padding:e.spacing(0,1),...e.mixins.toolbar,justifyContent:"flex-start"})),D=({children:e})=>{let t=(0,E.useRouter)(),[r,o]=a.useState(!1);return n.jsx(l.CM,{theme:q,children:(0,n.jsxs)(u.Z,{sx:{display:"flex"},children:[n.jsx(g.ZP,{}),n.jsx(G,{position:"fixed",open:r,children:(0,n.jsxs)(m.Z,{children:[n.jsx(v.Z,{variant:"h6",noWrap:!0,sx:{flexGrow:1},component:"div",children:"HPKE"}),n.jsx(w.Z,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:()=>{o(!0)},sx:{...r&&{display:"none"}},children:n.jsx(f.Z,{})})]})}),(0,n.jsxs)(_,{open:r,children:[n.jsx(M,{}),e]}),(0,n.jsxs)(x.ZP,{sx:{width:240,flexShrink:0,"& .MuiDrawer-paper":{width:240}},variant:"persistent",anchor:"right",open:r,children:[n.jsx(M,{children:n.jsx(w.Z,{onClick:()=>{o(!1)},children:"rtl"===q.direction?n.jsx(P.Z,{}):n.jsx(k.Z,{})})}),n.jsx(j.Z,{}),(0,n.jsxs)(y.Z,{children:[n.jsx(Z.ZP,{disablePadding:!0,children:(0,n.jsxs)(b.Z,{onClick:()=>{t.push("/")},children:[n.jsx(C.Z,{children:n.jsx(i.Z,{})}),n.jsx(S.Z,{primary:"Home"})]})}),n.jsx(Z.ZP,{disablePadding:!0,children:(0,n.jsxs)(b.Z,{onClick:()=>{t.push("/about")},children:[n.jsx(C.Z,{children:n.jsx(s.Z,{})}),n.jsx(S.Z,{primary:"About"})]})})]}),n.jsx(j.Z,{sx:{flexGrow:1}}),n.jsx(u.Z,{sx:{p:2},children:n.jsx(A,{})})]})]})})}},1269:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>y});var n=r(5344),i=r(6314),s=r(6739),a=r(5183),o=r(3729),d=r(3692),c=r(4047),l=r(8428),p=r(4742),u=r(8761),x=r(4420),h=r(6213),m=r(3431),g=r(5418);function y(){let e=(0,l.useRouter)(),t=(0,l.useParams)(),[r,y]=o.useState("# ⌛ My lungs taste the air of Time Blown past falling sands ⌛"),v=async()=>{let n=JSON.parse(new TextDecoder().decode(d.tH.decode(decodeURIComponent(t.did).replace("did:jwk:","")))),i=new TextEncoder().encode(r),s=await x.o.encrypt(i,n),a=`did:jwe:${s}`;e.push("/decrypt/"+a)};return(0,n.jsxs)(i.AppDrawer,{children:[(0,n.jsxs)(s.Z,{sx:{display:"flex",flexDirection:"row",mb:2},children:[n.jsx(s.Z,{sx:{flexGrow:1},children:n.jsx(c.Z,{variant:"h6",component:"div",children:"Recipient"})}),n.jsx(s.Z,{children:n.jsx(a.Z,{variant:"outlined",color:"secondary",onClick:v,endIcon:n.jsx(u.Z,{}),children:"Encrypt"})})]}),n.jsx(p.Z,{deleteIcon:n.jsx(u.Z,{}),onDelete:()=>{},label:decodeURIComponent(t.did).substring(0,32)+"..."}),n.jsx(s.Z,{sx:{mt:2},children:n.jsx(h.ZP,{theme:g.Br,value:r,onChange:e=>{y(e)},extensions:[(0,m.JH)(),h.tk.lineWrapping]})})]})}},4420:(e,t,r)=>{"use strict";r.d(t,{o:()=>n});var n={};r.r(n),r.d(n,{decrypt:()=>p,encrypt:()=>l});var i=r(3692),s=r(7132);let a={"HPKE-Base-P256-SHA256-AES128GCM":new s.vN({kem:s.ML.DhkemP256HkdfSha256,kdf:s.AC.HkdfSha256,aead:s.R9.Aes128Gcm}),"HPKE-Base-P384-SHA256-AES128GCM":new s.vN({kem:s.ML.DhkemP384HkdfSha384,kdf:s.AC.HkdfSha256,aead:s.R9.Aes128Gcm})},o=e=>Object.keys(a).includes(`${e.alg}`),d=async e=>await window.crypto.subtle.importKey("jwk",e,{name:"ECDH",namedCurve:e.crv},!0,[]),c=async e=>await crypto.subtle.importKey("jwk",e,{name:"ECDH",namedCurve:e.crv},!0,["deriveBits","deriveKey"]),l=async(e,t)=>{if(!o(t))throw Error("Public key algorithm is not supported");let r=a[t.alg],n=await r.createSenderContext({recipientPublicKey:await d(t)}),s=i.tH.encode(new Uint8Array(n.enc)),c=i.tH.encode(JSON.stringify({alg:t.alg,epk:{kty:"EK",ek:s}})),l=new TextEncoder().encode(c),p=i.tH.encode(new Uint8Array(await n.seal(e,l)));return`${c}...${p}.`},p=async(e,t)=>{if(!o(t))throw Error("Public key algorithm is not supported");let r=a[t.alg],[n,s,d,l,p]=e.split("."),u=JSON.parse(new TextDecoder().decode(i.tH.decode(n))),x=await r.createRecipientContext({recipientKey:await c(t),enc:i.tH.decode(u.epk.ek)}),h=new TextEncoder().encode(n),m=await x.open(i.tH.decode(l),h);return new Uint8Array(m)}},1362:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>i,default:()=>a});let n=(0,r(6843).createProxy)(String.raw`/home/runner/work/hpke.dev/hpke.dev/app/encrypt/[did]/page.tsx`),{__esModule:i,$$typeof:s}=n,a=n.default},2917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o,metadata:()=>a});var n=r(5036),i=r(8592),s=r.n(i);r(7272);let a={title:"HPKE",description:"Hybrid Public Key Encryption"};function o({children:e}){return n.jsx("html",{lang:"en",children:n.jsx("body",{className:s().className,children:e})})}},7481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var n=r(337);let i=e=>[{type:"image/x-icon",sizes:"48x48",url:(0,n.fillMetadataSegment)(".",e.params,"favicon.ico")+""}]},7272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,719,142,529,329],()=>r(3271));module.exports=n})();